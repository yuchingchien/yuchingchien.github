<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>Progress bar</title>
  </head>
  <body>
    <!-- 先看網頁大致上有幾個區塊 再打出幾個div -->
    <div style="height:500px;background-color: rgb(113, 171, 229); "></div>
    <!-- 這個是進度條深色的部分，要加上sticky-top，才能把進度條放在這裡 -->
    <div class=" sticky-top" style="height:50px;background-color: dimgray; ">
         <!-- 一開始進度條有顏色的部分（rgb(241, 117, 117)）可以寫0px，接下去寫java  script -->
        <div id="statusbar" style="height:50px; width: 0px; background-color: rgb(241, 117, 117)">
         <p>Now: <span id="scrollperc">0</span>%</p> 
         
        </div>
    </div>  

    <!-- 白色就好, 改成vh -->
    <div style="height:200vh;"></div>  
    <div style="height:100vh;background-color: grey; "></div>  
 
    
    
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <!-- js要先監聽才能做其他動作 -->
    <script>
        $(function(){
            // 有幾個變相要取
            var doch = $(document).height();
            var winw = $(window).width();
            //二、為了讓statusbar能滾動到最後，需要新增兩個變項
            var winh = $(window).height();
            var max_scroll = doch - winh

            $(window).scroll(function(){
                // 下面這行記得是要放在$(window)這個階層底下
                var current_pos = $(window).scrollTop(); 
                //var  new_width = current_pos/doch*winw; (要把doch改成max_scroll)
                var  new_width = current_pos/max_scroll*winw;
                $("#statusbar").css("width",new_width);
                //一、如果只寫到上面這行的話，可以發現進度條並不會完全從0滾動到填滿，因為我們並不會實際的捲動完整格視窗（實際捲動只有從頭減掉最後停留的頁面高度）
                //記得把%取整數 可上網查程式碼
                $("#scrollperc").html(parseInt(current_pos/max_scroll*100));


                

            });


        });



    </script>
  
  </body>
</html>